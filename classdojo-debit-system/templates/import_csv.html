{% extends "base.html" %}

{% block title %}Import CSV - ClassDojo Debit System{% endblock %}

{% block content %}
<h1>üì• Import Students from CSV</h1>

<div class="card">
    <h2>Upload ClassDojo Export</h2>
    
    <form method="POST" action="{{ url_for('import_csv') }}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="file">Select CSV File *</label>
            <input type="file" id="file" name="file" accept=".csv" required 
                   style="padding: 10px; border: 2px dashed #667eea; border-radius: 8px; background: #f8f9fa;">
        </div>
        
        <div style="margin-top: 30px;">
            <button type="submit" class="btn">Import Students</button>
            <a href="{{ url_for('students') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<div class="card">
    <h2>üìÑ CSV Format Requirements</h2>
    <p>Your CSV file should have the following columns (header row required):</p>
    
    <table style="margin-top: 20px;">
        <thead>
            <tr>
                <th>Column Name</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>Student ID</code> or <code>id</code></td>
                <td>Unique identifier for the student</td>
                <td>‚úì Yes</td>
            </tr>
            <tr>
                <td><code>First Name</code> or <code>first_name</code></td>
                <td>Student's first name</td>
                <td>‚úì Yes</td>
            </tr>
            <tr>
                <td><code>Last Name</code> or <code>last_name</code></td>
                <td>Student's last name</td>
                <td>‚úì Yes</td>
            </tr>
            <tr>
                <td><code>Class</code> or <code>class</code></td>
                <td>Class or grade name</td>
                <td>Optional</td>
            </tr>
            <tr>
                <td><code>Points</code> or <code>points</code></td>
                <td>Current point balance</td>
                <td>Optional (defaults to 0)</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="card">
    <h2>üìù Example CSV Format</h2>
    <pre style="background: #f8f9fa; padding: 20px; border-radius: 8px; overflow-x: auto;">Student ID,First Name,Last Name,Class,Points
S001,John,Smith,Grade 5A,150
S002,Emma,Johnson,Grade 5A,200
S003,Michael,Brown,Grade 5B,175
S004,Sophia,Davis,Grade 5B,125</pre>
</div>

<div class="card">
    <h2>üìã How to Export from ClassDojo</h2>
    <ol style="line-height: 2; margin-left: 20px;">
        <li>Log in to your ClassDojo admin account</li>
        <li>Navigate to your class or school view</li>
        <li>Look for "Export" or "Download" options (usually in settings or reports)</li>
        <li>Select CSV format for the export</li>
        <li>Download the file to your computer</li>
        <li>Upload it here to import all students at once</li>
    </ol>
    
    <p style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border: 1px solid #ffc107;">
        <strong>‚ö†Ô∏è Note:</strong> If a student with the same Student ID already exists, their information will be updated with the new data from the CSV.
    </p>
</div>

<div class="card">
    <h2>üí° Tips</h2>
    <ul style="line-height: 1.8; margin-left: 20px;">
        <li>Make sure your CSV file is properly formatted with headers</li>
        <li>Student IDs must be unique</li>
        <li>Points will be imported as the initial balance</li>
        <li>You can edit the CSV file in Excel or any text editor before importing</li>
        <li>After importing, you'll need to assign physical cards to students separately</li>
        <li>Large imports may take a few moments to process</li>
    </ul>
</div>
{% endblock %}
